{% extends "base.html" %}

{% block title %}
    {% if action == 'crear' %}Crear Nuevo Producto{% else %}Editar Producto{% endif %}
{% endblock %}

{% block content %}
    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
            <div class="card shadow-lg border-0 rounded-3">
                <div class="card-header bg-primary text-white text-center">
                    <h2 class="mb-0">
                        {% if action == 'crear' %}
                            Registro de Nuevo Producto
                        {% else %}
                            EdiciÃ³n de Producto: {{ producto.nombre }}
                        {% endif %}
                    </h2>
                </div>
                <div class="card-body p-4">
                    <form method="POST" action="
                        {% if action == 'crear' %}
                            {{ url_for('crear_producto') }}
                        {% else %}
                            {{ url_for('editar_producto', id_producto=producto.id_producto) }}
                        {% endif %}
                    ">
                        
                        <!-- Campo Nombre -->
                        <div class="mb-3">
                            <label for="nombre" class="form-label fw-bold">Nombre del Producto</label>
                            <input type="text" class="form-control form-control-lg" id="nombre" name="nombre" required
                                   value="{{ producto.nombre if producto else '' }}"
                                   placeholder="Ej: Laptop Gamer, Monitor 4K">
                        </div>

                        <!-- Campo Precio -->
                        <div class="mb-3">
                            <label for="precio" class="form-label fw-bold">Precio ($)</label>
                            <input type="number" step="0.01" min="0.01" class="form-control" id="precio" name="precio" required
                                   value="{{ '%.2f'|format(producto.precio) if producto else '' }}"
                                   placeholder="Ej: 199.99">
                            <div class="form-text">Usa el formato 0.00 (dos decimales).</div>
                        </div>

                        <!-- Campo Stock -->
                        <div class="mb-4">
                            <label for="stock" class="form-label fw-bold">Stock (Unidades)</label>
                            <input type="number" min="0" class="form-control" id="stock" name="stock" required
                                   value="{{ producto.stock if producto else '' }}"
                                   placeholder="Ej: 50">
                        </div>
                        
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a href="{{ url_for('leer_productos') }}" class="btn btn-secondary btn-lg order-md-1">Cancelar</a>
                            <button type="submit" class="btn btn-success btn-lg order-md-0">
                                {% if action == 'crear' %}ðŸ’¾ Guardar Producto{% else %}âœ… Actualizar Producto{% endif %}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}